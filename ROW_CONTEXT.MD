# ROW CONTEXT

* ROW CONTEXT
	FILTER APPLIED AT THE ROW LEVEL WHEN CREATING A CALCULATED COLUMN
	AUTOMATIC FILTERING DOES NOT OCCUR
		DOES NOT AUTOMATICALLY USE THE RELATIONSHIPS DEFINED IN THE MODEL

* ROW CONTEXT DOES NOT AUTOMATICALLY INTERACT WITH THE RELATIONSHIPS IN THE DATA MODEL 


* CALCULATED COLUMNS



* ITERATOR FUNCTIONS

## CONTEXT TRANSITION

* CONTEXT TRANSITION
	ROW CONTEXTS TRANSITIONS INTO A FILTER CONTEXT
		IMPORTANT, BECAUSE CALCULATED COLUMNS WILL INTERACT WITH RELATIONSHIPS IN THE DATA MODEL THE EXACTLY CALCULATED MEASURES DO
		SO IT CAN USE RELATIONSHIPS IN THE DATA MODEL AND FILTER OTHER DOWN OTHER TABLES
	WHEREAS	WHEN ROW CONTEXT DOESN'T OCCUR, IT DOESN'T USE THOSE RELATIONSHIPS

* CALCULATE
	AUTOMATICALLY
	EXPLICIT
	IMPLICIT

* THIS APPLIES TO CALCULATED COLUMNS AND MEASURES

* MEASURES WILL APPLY ROW CONTEXT AUTOMATICALLY

EXAMPLE

* TWO DIFFERENT CALCULATED COLUMNS IN DATE TABLE
* CREATE MEASURE IN THE TABLE
* USE THE MEASURE IN THE COLUMN

COLUMN
	TOTAL HOMES SOLD = 
	COUNTROWS('MLS')

BY USING THE FUNCTION BLINDLY IN A COLUMN, IT WILL RETURN THE RESULT FOR THE ENTIRE TABLE

	MEASURE:
	
		TOTAL HOMES SOLD MEASURE = 
		COUNTROWS('MLS') 

COLUMN

		TOTAL HOMES SOLD 2 = [TOTAL HOMES SOLD MEASURE] 

BY USING THE MEASURE, IT APPLIES THE ROW CONTEXT AND GIVES THE CORRECT AMOUNT OF TOTAL HOMES SOLD

EXAMPLE 2

* USE THE CALCULATE FUNCTION

	CALCULATED COLUMN:
	TOTAL HOMES SOLD CALCULATE = 
	CALCULATE(
    	COUNTROWS('MLS')
	) 

* THE CALCULATE FUNCTION FORCES THE ROW CONTEXT

EXAMPLE 3

* USE THE RELATEDTABLE FUNCTION

CALCULATED COLUMN:

		TOTAL HOMES SOLD RELATEDTABLE = 
		COUNTROWS(RELATEDTABLE('MLS')) 

# X FUNCTIONS AND WORKING WITH ITERATORS

ITERATORS

* TABLE OR TABLE EXPRESSION AS FIRST PARAMETER

* X FUNCTIONS CREATE ROW CONTEXT

* ROW BY ROW OPERATION

* X-FUNCTIONS ARE ITERATORS

* FILTER FUNCTIONS ARE ITERATORS

## WORKING WITH TOTALS

* USE SUMX TO CHANGE THE VALUES IN ROWS

USE CASE: IN REPORT LAYER WHERE THE TOTALS ARE NOT ADDING UP CORRECTLY

EXAMPLE: 

	DYNAMIC MEASURE COMPLETE = 
	IF(
	HASONEVALUE('Date'[Month]),
	[Dynamic Measure],
	SUMX(
		VALUES('Date'[Month]),
		[Dynamic Measure])) 

CONTEXT OF THE REPORT LAYER: THE GRAND TOTALS DO NOT ADD UP CORRECTING FOR THE DYNAMIC MEASURE

CODE FOR DYNAMIC MEASURE:

	Dynamic Measure = 
	VAR
	LastSaleDate = MAX('Internet Sales Filtered'[OrderDate])
	VAR
	LastDayOfMonth = MAX('Date'[Date])
	RETURN

	IF(
	LastSaleDate <> LastDayOfMonth,
	[Forecast YTD Sales],
	[YTD Sales])

* Note: this is complicated

* use IF STATEMENT IN CONJUNCTION WITH THE HASONEVALUE FOR THE ROW LEVEL WITHIN THE REPORT LAYER
	IN THIS CASE, THE ROW LEVEL IS THE MONTH
	THE DYNAMIC MEASURE ADDS UP INCORRECTLY BECAUSE A) THE TOTAL (FOR ALL MONTHS, THEREFORE HAS MORE THAN ONE VALUE)
	JUST DEFAULTS TO THE TOTAL OF THE FORECAST YTD SALES

* THE HASONEVALUE TESTS FOR THE TOTAL LEVEL IN THE ROW CONTEXT OF THE MONTH, WHICH WILL RETURN THE DYNAMIC MEASURE 
	APPROPRIATELY AT THE MONTH LEVEL WITHIN THE REPORT

* IF THIS IS NOT TRUE, THE SUMX FUNCTION IS USED TO SUM UP ALL THE VALUES (USING THE VALUES FUNCTION) OF THE MONTH LEVEL WITHIN THE REPORT
	TO ADD UP THE APPROPRIATE TOTAL
