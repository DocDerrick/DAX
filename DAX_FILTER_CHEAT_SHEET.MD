# DAX FILTER FUNCTION EXAMPLES

## FILTER() AND ALL() EXAMPLE: CALCULATE THE TOTAL HOMES ON THE MARKET

	Total Homes on Market (calculate) = 
	CALCULATE(
		[Quantity Sold],
		FILTER(ALL('MLS'),
			'MLS'[Sold Date]>=MIN('Date'[Date]) &&
			'MLS'[Listing Date]<=MAX('Date'[Date])))

* CALCULATE FUNCTION IS USED TO OVERIDE FILTER CONTEXT

* IN THIS CASE, THE MAIN FILTER WE NEED TO BE WEARY OF IS THE DATE FILTER CONTEXT

* FILTER IS USED TO ITERATE OVER THE MLS TABLE

* ALL FUNCTION IS USED IN CONJUNCTION TO IGNORE THE DATE FILTER CONTEXT THAT WILL BE APPLIED IN THE REPORT LAYER

* FILTER CONDITIONS OF MIN AND MAX

EQUIVALENT FUNCTION

	Total Homes on Market = 
	COUNTROWS(
	FILTER(ALL('MLS'),
		'MLS'[Sold Date]>=MIN('Date'[Date]) &&
		'MLS'[Listing Date]<=MAX('Date'[Date])))

* PRETTY MUCH THE SAME DEAL AS ABOVE, HOWEVER, NO CALCULATE FUNCTION IS USED. IT WORKS, BUT RECOMMENDATION
WOULD BE TO CREATE THE COUNTROWS SEPARATELY AND APPLY CALCULATE, AS ABOVE, WITH THE SAME FILTER CONTEXT 

## FILTER() AND ALL() FUNCTION EXAMPLE 2: NEW LISTINGS ON THE MARKET

	New Listings on Market (calculate) = 
	CALCULATE(
		[Quantity Sold],
		FILTER(ALL('MLS'),
			'MLS'[Listing Date]>=MIN('Date'[Date]) &&
			'MLS'[Listing Date]<=MAX('Date'[Date]))) 

* REPEATED EXAMPLE FROM ABOVE
* KEY POINT, USING CALCULATE WITH FILTER AND ALL TO OVERIDE THE FILTER CONTEXT OF THE DATE DIMENSION IN THE REPORT LAYER
* ALL() FUNCTION IGNORES THE FILTER CONTEXT ON THE DATE DIMENSION

	New Listings On Market = 

	COUNTROWS(
		FILTER(ALL('MLS'),
			'MLS'[Listing Date]>=MIN('Date'[Date]) &&
			'MLS'[Listing Date]<=MAX('Date'[Date]))) 


## FILTER AND THE ALLEXCEPT FUNCTION

NOTES:

* ALLEXCEPT IS USED IN CONJUNCTION WITH THE FILTER FUNCTION

* ALLEXCEPT IS SIMILAR TO THE ALL FUNCTION. IT IS ALSO A TABLE FUNCTION THAT IGNORE FILTERS ON A TABLE
	,HOWEVER, EXCEPT FOR AN EXPLICITLY STATED COLUMN.

* ALLEXCEPT RESULTS WITH THE SPECIFIED COLUMN HONORING THE FILTER CONTEXT OF THE MEASURE BUT ALLOWING THE REST 
	OF THE TABLE TO IGNORE THE FILTER CONTEXT

* A GOOD USE CASE IS WHEN A REPORT HAS AN OUTSIDE SLICER OR FILTER THAT YOU WANT TO HONOR

EXAMPLE: IN THIS USE CASE 'MLS'[NEW CONSTRUCTION] IS A FILTER IN THE REPORT


	New Listings (AllExcept) = 

	CALCULATE(
	[Quantity Sold],
		FILTER(ALLEXCEPT('MLS','MLS'[New Construction Y/N]),
			'MLS'[Listing Date]>=MIN('Date'[Date]) &&
			'MLS'[Listing Date]<=MAX('Date'[Date])))

* IN THIS CASE WE ARE IGNORING ALL FILTERS ON THE 'MLS' TABLE EXCEPT THE 'MLS'[NEW CONSTRUCTION Y/N] COLUMN IN THE TABLE

## HASONEVALUE FUNCTION

* HASONEVALUE IS A LOGICAL FUNCTION

* HASONEVALUE TESTS THE REPORT ROW LAYER WHETHER THERE IS ONLY ONE VALUE

* USE THIS WITH THE BLANK FUNCTION TO GET RID OF ANY CONFUSION WITHIN THE REPORT

* HASONEVALUE NEEDS TO BE USED FOR COLUMNS USED TO SLICE THE REPORT IN THE REPORT LAYER

Example:

	Total Homes on Market (calculate) hasonevalue = 
	IF(
		HASONEVALUE('Date'[Year]),
			CALCULATE(
		[Quantity Sold],
		FILTER(ALL('MLS'),
			'MLS'[Sold Date] >= MIN('Date'[Date]) &&
			'MLS'[Listing Date] <= MAX('Date'[Date]))),
			BLANK())

* HASONEVALUE IS USED TO CHECK WHETHER THERE IS ONLY ONE VALUE ON THE YEAR AND DATE LEVEL

* IF THIS IS TRUE, THE MEASURE CALCULATION IS RETURNED, IF NOT A BLANK VALUE IS RETURNED
